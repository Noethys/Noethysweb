{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="en">
<head>

    {% block meta %}
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Noethysweb">
    {% endblock meta %}

    <link rel="shortcut icon" href="{% static 'images/icone.png' %}"/>

    <title>Noethysweb | Connexion</title>

    {% block styles %}
        <link rel="stylesheet" type="text/css" href="{% static 'lib/bootstrap4/css/bootstrap.min.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'lib/font-awesome/css/font-awesome.min.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'lib/bootstrap4/css/custom.css' %}">

        <style>

            body {
                font-family: "Karla", sans-serif;
                background-color: #d0d0ce;
                min-height: 100vh;
            }
            .brand-wrapper {
                margin-bottom: 0px;
                text-align: center;
            }
            .brand-wrapper .logo {
                height: 100px;
            }
            .login-card {
                border: 0;
                border-radius: 27.5px;
                box-shadow: 0 20px 30px 0 rgba(0, 0, 0, 0.43);
                overflow: hidden;
            }
            .login-card-img {
                border-radius: 0;
                position: absolute;
                width: 100%;
                height: 100%;
                -o-object-fit: cover;
                object-fit: cover;
            }
            .login-card .card-body {
                padding: 40px 60px 40px;
            }
            @media (max-width: 422px) {
                .login-card .card-body {
                    padding: 35px 24px;
                }
            }
            .login-card-description {
                font-size: 20px;
                color: #000;
                font-weight: normal;
                margin-bottom: 50px;
                text-align: center;
            }
            .titre_contenu {
                color: #000;
                font-weight: bold;
            }
            .login-card form {
            }
            .login-card .form-control {
                border: 1px solid #d5dae2;
                padding: 15px 25px;
                min-height: 45px;
                font-size: 13px;
                line-height: 15;
                font-weight: normal;
            }
            .login-card .ligne {
                margin-bottom: 20px;
            }
            .login-card .form-control::-webkit-input-placeholder {
                color: #919aa3;
            }
            .login-card .form-control::-moz-placeholder {
                color: #919aa3;
            }
            .login-card .form-control:-ms-input-placeholder {
                color: #919aa3;
            }
            .login-card .form-control::-ms-input-placeholder {
                color: #919aa3;
            }
            .login-card .form-control::placeholder {
                color: #919aa3;
            }
            .login-card .login-btn {
                padding: 13px 20px 12px;
                font-size: 17px;
                font-weight: bold;
                line-height: 20px;
                margin-bottom: 24px;
                margin-top: 35px;
            }
            .login-card .forgot-password-link {
                font-size: 14px;
                color: #919aa3;
                margin-bottom: 12px;
            }
            .login-card-footer-text {
                font-size: 16px;
                color: #0d2366;
                margin-bottom: 0px;
            }
            @media (max-width: 767px) {
                .login-card-footer-text {
                    margin-bottom: 24px;
                }
            }
            .login-card-footer-nav a {
                font-size: 14px;
                color: #919aa3;
            }
            .container, .container-lg, .container-md, .container-sm {
                max-width: 900px;
            }
            .modal-backdrop {
                opacity:0.5 !important;
            }
            .bg-image {
                background-image: url("{{ url_image_fond }}");
                filter: blur(10px);
                -webkit-filter: blur(8px);
                background-position: center;
                background-repeat: no-repeat;
                background-size: cover;
                position: fixed;
                top: -10px;
                left: -10px;
                width: 110%;
                height: 110%;
                box-shadow:inset 0 0 0 2000px rgba(0, 0, 0, 0.4);
            }
            .selecteur_langues {
                position: absolute;
                top: 0px;
                right: 0px;
            }
            #id_afficher_mdp {
                color: #495057;
            }
        </style>
    {% endblock %}

    {% block scripts %}
        <script src="{% static 'lib/jquery/jquery.min.js' %}"></script>
        <script src="{% static 'lib/bootstrap4/js/bootstrap.min.js' %}"></script>
        
        <script>
            $(document).ready(function () {
                $('#id_eye').click(function (event) {
                    event.preventDefault();
                    $('#id_password').attr('type', $('#id_password').is(':password') ? 'text' : 'password');
                    if ($('#id_password').attr('type') === 'password') {
                        $('#id_eye').removeClass('fa-eye').addClass('fa-eye-slash');
                    } else {
                        $('#id_eye').removeClass('fa-eye-slash').addClass('fa-eye');
                    }
                });
            });
        </script>

    {% endblock %}

    {% block extra_head %}
    {% endblock %}

</head>


<body>

    <div class="bg-image"></div>

    <main class="d-flex align-items-center min-vh-100 py-3 py-md-0">
        <div class="container">
            <div class="card login-card">
                <div class="row no-gutters">
                    <div class="col-md-5">
                        <img src="{{ url_image_fond }}"
                         alt="login" class="login-card-img">
                    </div>
                    <div class="col-md-7">
                        <div class="card-body">
                            <div class="brand-wrapper">
                                {% if organisateur and organisateur.logo %}
                                    <img src="{{ organisateur.logo.url }}" alt="logo" class="logo">
                                {% endif %}
                            </div>
                            {% if not parametres_portail or parametres_portail.connexion_afficher_nom_organisateur %}
                                <p class="login-card-description">{{ organisateur.nom }}</p>
                            {% endif %}

                            <p class="titre_contenu">{% block titre_contenu %}Connexion{% endblock titre_contenu %}</p>

                            {% block contenu_page %}
                            {% endblock contenu_page %}

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    {% if parametres_portail.multilingue %}
        <div class="selecteur_langues">
            <form action="{% url 'set_language' %}" method="post">{% csrf_token %}
                <input name="next" type="hidden" value="{{ redirect_to }}">
                <ul class="d-inline-flex mr-1" style="list-style:none;">
                    {% get_current_language as lang_actual %}
                    {% get_available_languages as languages %}
                    {% for lang_code, lang_name in languages %}
                        <li>
                            <button type="submit" name="language" title="{{ lang_name }}" value="{{ lang_code }}" class="btn nav-link pl-1 pr-0 {% if lang_code == lang_actual %}selected{% endif %}">
                                {% with 'images/drapeaux/'|add:lang_code|add:'.png' as image_drapeau %}
                                    <img src="{% static image_drapeau %}">
                                {% endwith %}
                            </button>
                        </li>
                    {% endfor %}
                </ul>
            </form>
        </div>
    {% endif %}

</body>

</html>
